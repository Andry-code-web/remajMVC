<div class="container_detalles">
  <div class="property-header">
    <h1 class="property-title">
      <%= auction.ubicacion %>
    </h1>
    <p class="property-address">
      <%= auction.categoria %>
    </p>
  </div>

  <div class="main-content">
    <div class="carousel">
      <div class="carousel-inner">
        <div class="carousel-item"><img src="/img/casa.png" alt="Imagen 1"></div>
        <div class="carousel-item"><img src="/img/casa.png" alt="Imagen 2"></div>
        <div class="carousel-item"><img src="/img/casa2.jfif" alt="Imagen 3"></div>
        <div class="carousel-item"><img src="/img/casa3.jfif" alt="Imagen 4"></div>
      </div>
      <a href="#" class="carousel-control prev">&lt;</a>
      <a href="#" class="carousel-control next">&gt;</a>
    </div>

    <div class="section">
      <h2 class="section-title">Sobre la Propiedad</h2>
      <!-- Mostrar nombre del usuario si está autenticado -->
      <% if (user && user.username) { %>
        <p>Usuario: <%= user.username %>
        </p>
        <% } else { %>
          <p>Usuario: Anónimo</p>
          <% } %>
            <p>
              <%= auction.descripcion %>
            </p>
    </div>
  </div>
  <div class="sidebar" id="chatdesubastas">

    <!--  aca va el codigo chatb subasta  -->

    <%- include('chat') %>

  </div>

  <div class="details-grid">
    <div class="detail-item">
      <i class="fas fa-bed detail-icon"></i>
      <div class="detail-value">Habitaciones</div>
      <div class="detail-label">
        <%= auction.N_habitacion %>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-bath detail-icon"></i>
      <div class="detail-value">Baños</div>
      <div class="detail-label">
        <%= auction.N_banos %>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-vector-square detail-icon"></i>
      <div class="detail-value">Tamaño</div>
      <div class="detail-label">
        <%= auction.tamaño_propiedad %> ft²
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-utensils detail-icon"></i>
      <div class="detail-value">Cocina</div>
      <div class="detail-label">
        <%= auction.cocina %>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-warehouse detail-icon"></i>
      <div class="detail-value">Garaje</div>
      <div class="detail-label">
        <%= auction.cochera %>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-tag detail-icon"></i>
      <div class="detail-value">Precio oferta</div>
      <div class="detail-label">
        <%= auction.precios %>
      </div>
    </div>
  </div>
</div>
</div>
</section>
<link rel="stylesheet" href="/css/auction_detail/auction_detail.css">
<link rel="stylesheet" href="/css/chatsubastas/chatsubastas.css">
<link rel="stylesheet" href="/css/auction_detail/auction_detail.css">
<link rel="stylesheet" href="/css/chat/chat_subasta.css">

<script src="/socket.io/socket.io.js"></script>

<script>

  // Carrusel de imágenes
  const carousel = document.querySelector('.carousel-inner');
  const items = carousel.querySelectorAll('.carousel-item');
  let currentIndex = 0;

  function showSlide(index) {
    carousel.style.transform = `translateX(-${index * 100}%)`;
  }

  document.querySelector('.carousel-control.prev').addEventListener('click', (e) => {
    e.preventDefault();
    currentIndex = (currentIndex - 1 + items.length) % items.length;
    showSlide(currentIndex);
  });

  document.querySelector('.carousel-control.next').addEventListener('click', (e) => {
    e.preventDefault();
    currentIndex = (currentIndex + 1) % items.length;
    showSlide(currentIndex);
  });
</script>
