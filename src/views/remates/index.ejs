<div class="banner_remates2" id="banner_remates">
    <div id="banner" class="overlay">
        <h1>REMATES</h1>
    </div>
</div>


<div class="prueva1">
    <!-- tarjeta v1 -->

    <div class="card">

        <div class="image-container">
            <img class="foto_casa"
                src="https://uiparadox.co.uk/public/templates/realtor/v2/assets/media/properties/property-1.png"
                alt="House Image">
            <a href="#" class="etiqueta_imagen">mas informacion</a>
            <img class="info_img" src="/img/imagen_pequeña_casa.png" alt="">
            <h6 class="info_img_tex">en venta</h6>
        </div>
        <a class="enlaces_carta" href="#">
            <div class="card-content">
                <h2>casa de campo</h2>
                <p class="address">110 hola mundo, nose donde queda</p>
                <p class="price">$90,000</p>
                <p class="details">4 habitacion | 2 Baños | 360 metros</p>
            </div>
        </a>
    </div>

    <section id="chat">
        <ul id="messages"></ul>

        <!-- Formulario 1 -->
        <form id="form1">
            <div class="input-container">
                <input type="number" id="input" class="input-field" placeholder="Escribe un monto" autocomplete="off" />
                <button type="submit" class="send-btn">Enviar</button>
            </div>
        </form>

        <!-- Formulario 2 -->
        <form id="form2">
            <div class="input-container">
                <input type="number" id="input2" class="input-field" placeholder="Monto más alto + 100" readonly />
                <button type="submit" class="send-btn">Enviar</button>
            </div>
        </form>
    </section>

    <script type="module">
        import { io } from 'https://cdn.socket.io/4.3.2/socket.io.esm.min.js'

        const socket = io()

        // Referencias del DOM
        const form1 = document.getElementById('form1')
        const input1 = document.getElementById('input') // Primer input
        const form2 = document.getElementById('form2')
        const input2 = document.getElementById('input2') // Segundo input
        const messages = document.getElementById('messages')

        let highestAmount = 0 // Variable para almacenar el monto más alto

        // Escuchar mensajes del servidor y mostrarlos en el chat
        socket.on('chat-message', (msg) => {
            const item = `<li>${msg}</li>`
            messages.insertAdjacentHTML('beforeend', item)
        })

        // Evento para el primer formulario
        form1.addEventListener('submit', (e) => {
            e.preventDefault()

            const value = parseFloat(input1.value) || 0 // Obtener valor como número

            if (value > 0) {
                // Si el valor es mayor al monto más alto, actualizamos
                if (value > highestAmount) {
                    highestAmount = value
                    input2.value = highestAmount + 100 // Actualizar segundo input
                }

                // Emitir mensaje al servidor
                socket.emit('chat-message', value)
                input1.value = '' // Limpiar input
            }
        })

        // Evento para el segundo formulario
        form2.addEventListener('submit', (e) => {
            e.preventDefault()

            const value = parseFloat(input2.value) || 0 // Obtener valor como número

            if (value > 0) {
                // Emitir mensaje al servidor
                socket.emit('chat-message', value)

                // Si el valor enviado es mayor al monto más alto, actualizarlo
                if (value > highestAmount) {
                    highestAmount = value
                    input2.value = highestAmount + 100 // Actualizar segundo input
                }
            }
        })

    </script>