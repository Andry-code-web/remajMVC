<%- include('../layouts/main') %>

<div class="auction-detail">
    <div class="row">
        <div class="col-md-8">
            <div class="property-images mb-4">
                <!-- Carrusel de imágenes -->
                <div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <% auction.images.forEach((image, index) => { %>
                            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                                <img src="<%= image %>" class="d-block w-100" alt="Propiedad">
                            </div>
                        <% }); %>
                    </div>
                    <!-- Controles del carrusel -->
                </div>
            </div>
            
            <div class="property-info">
                <h2><%= auction.categoria.charAt(0).toUpperCase() + auction.categoria.slice(1) %> en <%= auction.ubicacion %></h2>
                <p class="price">Precio Base: S/. <%= auction.precios.toLocaleString() %></p>
                <div class="description">
                    <%= auction.descripcion %>
                </div>
                
                <div class="features mt-4">
                    <h3>Características</h3>
                    <ul class="list-unstyled">
                        <% if(auction.N_habitacion) { %>
                            <li>Habitaciones: <%= auction.N_habitacion %></li>
                        <% } %>
                        <!-- Más características -->
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="auction-status card mb-4">
                <div class="card-body">
                    <h3>Estado de la Subasta</h3>
                    <p class="status <%= auction.estado %>"><%= auction.statusMessage %></p>
                    <% if(auction.estado === 'en_curso') { %>
                        <div class="bid-section">
                            <h4>Última Oferta: S/. <%= currentBid.toLocaleString() %></h4>
                            <form id="bidForm">
                                <input type="number" class="form-control mb-2" id="bidAmount" 
                                       min="<%= currentBid + 1000 %>" step="1000">
                                <button type="submit" class="btn btn-primary w-100">Hacer Oferta</button>
                            </form>
                        </div>
                    <% } %>
                </div>
            </div>
            
            <div class="chat-section card">
                <div class="card-body">
                    <h3>Chat de la Subasta</h3>
                    <div id="chatMessages" class="chat-messages">
                        <!-- Mensajes del chat -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/auction-detail.js"></script>